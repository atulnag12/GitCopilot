    - name: Set result message based on diff output
      set_fact:
        comparison_message: >
          {% if diff_output.rc == 0 %}
            <h2>The JAR files are identical.</h2>
          {% else %}
            <h2>The JAR files differ. Please see the details below:</h2>
            <table border="1" cellpadding="5" cellspacing="0">
              <tr>
                <th style="background-color:#f2f2f2;">File Name</th>
                <th style="background-color:#f2f2f2;">Differences</th>
              </tr>
              {% for line in diff_output.stdout.splitlines() %}
                <tr>
                  <td>{{ line.split(':')[0] }}</td>
                  <td style="color:red;">{{ line.split(':')[1] }}</td>
                </tr>
              {% endfor %}
            </table>
          {% endif %}
